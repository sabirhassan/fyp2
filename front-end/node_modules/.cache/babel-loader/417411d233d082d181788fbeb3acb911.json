{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\test1\\\\front-end\\\\src\\\\components\\\\component-change-password.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nfunction validate(oldPass, newPass, renewPass) {\n  // true means invalid, so our conditions got reversed\n  return {\n    old: oldPass.length === 0,\n    new: newPass.length < 8,\n    renew: renewPass !== newPass\n  };\n}\n\nexport default class changePassword extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleBlur = field => evt => {\n      this.setState({\n        touched: { ...this.state.touched,\n          [field]: true\n        }\n      });\n    };\n\n    this.state = {\n      old: '',\n      new: '',\n      renew: '',\n      touched: {\n        old: false,\n        new: false,\n        renew: false\n      }\n    };\n    this.onChangeold = this.onChangeold.bind(this);\n    this.onChangenew = this.onChangenew.bind(this);\n    this.onChangerenew = this.onChangerenew.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  onChangeold(e) {\n    this.setState({\n      old: e.target.value\n    });\n  }\n\n  onChangenew(e) {\n    this.setState({\n      new: e.target.value\n    });\n  }\n\n  onChangerenew(e) {\n    this.setState({\n      renew: e.target.value\n    });\n  }\n\n  async onSubmit(e) {\n    e.preventDefault();\n    let id = localStorage.getItem(\"id\");\n    let oldPass = localStorage.getItem(\"password\");\n    console.log(`Form submitted:`);\n    console.log(`id: ${id}`);\n    console.log(`old: ${this.state.old}`);\n    console.log(`new: ${this.state.new}`);\n    console.log(`renew: ${this.state.renew}`);\n    console.log(`oldPass: ${oldPass}`);\n    const user = {\n      id: id,\n      old: this.state.old,\n      new: this.state.new,\n      renew: this.state.renew,\n      oldPass: oldPass\n    };\n    console.log(user);\n    await axios.post('http://localhost:4000/updatepassword', user).then(res => {\n      console.log(res.data);\n\n      if (res.data === \"success\") {\n        localStorage.setItem(\"password\", this.state.new);\n        alert(\"Password updated Successfuly\");\n      } else {\n        alert(res.data);\n      }\n    });\n    this.setState({\n      old: '',\n      new: '',\n      renew: ''\n    });\n  }\n\n  render() {\n    const errors = validate(this.state.old, this.state.new, this.state.renew);\n    const isDisabled = Object.keys(errors).some(x => errors[x]);\n\n    const shouldMarkError = field => {\n      const hasError = errors[field];\n      const shouldShow = this.state.touched[field];\n      return hasError ? shouldShow : false;\n    };\n\n    return React.createElement(\"div\", {\n      style: {\n        marginTop: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Change own Password\"), React.createElement(\"form\", {\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Old Password: \"), React.createElement(\"input\", {\n      type: \"password\",\n      className: shouldMarkError(\"old\") ? \"form-control is-invalid\" : \"form-control\",\n      value: this.state.old,\n      onChange: this.onChangeold,\n      onBlur: this.handleBlur(\"old\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), shouldMarkError(\"old\") ? React.createElement(\"div\", {\n      className: \"invalid-feedback\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"minimum length should be of 8 characters\") : \"\"), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, \"New Password: \"), React.createElement(\"input\", {\n      type: \"password\",\n      className: shouldMarkError(\"new\") ? \"form-control is-invalid\" : \"form-control\",\n      value: this.state.new,\n      onChange: this.onChangenew,\n      onBlur: this.handleBlur(\"new\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), shouldMarkError(\"new\") ? React.createElement(\"div\", {\n      className: \"invalid-feedback\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"minimum length should be of 8 characters\") : \"\"), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Retype New Password: \"), React.createElement(\"input\", {\n      type: \"password\",\n      className: shouldMarkError(\"renew\") ? \"form-control is-invalid\" : \"form-control\",\n      value: this.state.renew,\n      onChange: this.onChangerenew,\n      onBlur: this.handleBlur(\"renew\"),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), shouldMarkError(\"old\") ? React.createElement(\"div\", {\n      className: \"invalid-feedback\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"mismatch\") : \"\"), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      disabled: isDisabled,\n      value: \"Create User\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/User/Desktop/test1/front-end/src/components/component-change-password.js"],"names":["React","Component","axios","validate","oldPass","newPass","renewPass","old","length","new","renew","changePassword","constructor","props","handleBlur","field","evt","setState","touched","state","onChangeold","bind","onChangenew","onChangerenew","onSubmit","e","target","value","preventDefault","id","localStorage","getItem","console","log","user","post","then","res","data","setItem","alert","render","errors","isDisabled","Object","keys","some","x","shouldMarkError","hasError","shouldShow","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction validate(oldPass,newPass,renewPass) {\r\n    // true means invalid, so our conditions got reversed\r\n    return {\r\n      old: oldPass.length===0,\r\n      new: newPass.length<8,\r\n      renew: renewPass !== newPass\r\n    };\r\n}\r\n\r\nexport default class changePassword extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            old: '',\r\n            new: '',\r\n            renew:'',\r\n            touched: {\r\n                old: false,\r\n                new: false,\r\n                renew: false,\r\n                }\r\n        }\r\n        this.onChangeold = this.onChangeold.bind(this);\r\n        this.onChangenew = this.onChangenew.bind(this);\r\n        this.onChangerenew = this.onChangerenew.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n    }\r\n    \r\n\r\n    onChangeold(e) {\r\n        this.setState({\r\n            old: e.target.value\r\n        });\r\n    }\r\n\r\n    onChangenew(e) {\r\n        this.setState({\r\n            new: e.target.value\r\n        });\r\n    }\r\n    onChangerenew(e) {\r\n        this.setState({\r\n            renew: e.target.value\r\n        });\r\n    }\r\n\r\n\r\n    async onSubmit(e) {\r\n        e.preventDefault();\r\n      \r\n        let id= localStorage.getItem(\"id\");\r\n        let oldPass = localStorage.getItem(\"password\");\r\n\r\n        console.log(`Form submitted:`);\r\n        console.log(`id: ${id}`);\r\n        console.log(`old: ${this.state.old}`);\r\n        console.log(`new: ${this.state.new}`);\r\n        console.log(`renew: ${this.state.renew}`);\r\n        console.log(`oldPass: ${oldPass}`);\r\n        const user= {\r\n            id:id,\r\n            old:this.state.old,\r\n            new:this.state.new,\r\n            renew:this.state.renew,\r\n            oldPass:oldPass\r\n        }\r\n\r\n        console.log(user)\r\n        \r\n        await axios.post('http://localhost:4000/updatepassword', user)\r\n            .then(res => {\r\n                console.log(res.data);\r\n                if(res.data===\"success\")\r\n                {\r\n                    localStorage.setItem(\"password\",this.state.new);\r\n                    alert(\"Password updated Successfuly\");\r\n\r\n                }\r\n                else\r\n                {\r\n                    alert(res.data);\r\n                }\r\n            });\r\n\r\n        this.setState({\r\n            old: '',\r\n            new: '',\r\n            renew:''\r\n        });\r\n    }\r\n\r\n    handleBlur = (field) => (evt) => {\r\n        this.setState({\r\n          touched: { ...this.state.touched, [field]: true },\r\n        });\r\n      }\r\n\r\n\r\n    render() {\r\n\r\n        const errors = validate(this.state.old,this.state.new,this.state.renew);\r\n        const isDisabled = Object.keys(errors).some(x => errors[x]);\r\n\r\n        const shouldMarkError = field => {\r\n            const hasError = errors[field];\r\n            const shouldShow = this.state.touched[field];\r\n      \r\n            return hasError ? shouldShow : false;\r\n          };\r\n\r\n        return (\r\n            <div style={{marginTop: 10}}>\r\n                <h3>Change own Password</h3>\r\n                <form onSubmit={this.onSubmit}>\r\n                    \r\n                    \r\n                    <div className=\"form-group\">\r\n                        <label>Old Password: </label>\r\n                        <input \r\n                                type=\"password\" \r\n                                className={shouldMarkError(\"old\") ? \"form-control is-invalid\" : \"form-control\"}\r\n                                value={this.state.old}\r\n                                onChange={this.onChangeold}\r\n                                onBlur={this.handleBlur(\"old\")}\r\n                                />\r\n                                {shouldMarkError(\"old\") ?\r\n                                <div className=\"invalid-feedback\">\r\n                                    minimum length should be of 8 characters\r\n                                </div>\r\n                                :\"\"}\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                    <label>New Password: </label>\r\n                    <input \r\n                            type=\"password\" \r\n                            className={shouldMarkError(\"new\") ? \"form-control is-invalid\" : \"form-control\"}\r\n                            value={this.state.new}\r\n                            onChange={this.onChangenew}\r\n                            onBlur={this.handleBlur(\"new\")}\r\n                            />\r\n                            {shouldMarkError(\"new\") ?\r\n                                <div className=\"invalid-feedback\">\r\n                                    minimum length should be of 8 characters\r\n                                </div>\r\n                                :\"\"}\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                    <label>Retype New Password: </label>\r\n                    <input \r\n                            type=\"password\" \r\n                            className={shouldMarkError(\"renew\") ? \"form-control is-invalid\" : \"form-control\"}\r\n                            value={this.state.renew}\r\n                            onChange={this.onChangerenew}\r\n                            onBlur={this.handleBlur(\"renew\")}\r\n                            />\r\n                            {shouldMarkError(\"old\") ?\r\n                                <div className=\"invalid-feedback\">\r\n                                    mismatch\r\n                                </div>\r\n                                :\"\"}\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input type=\"submit\" disabled={isDisabled} value=\"Create User\" className=\"btn btn-primary\" />\r\n                    </div>\r\n                </form>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}